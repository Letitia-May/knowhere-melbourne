$(document).ready(function(){function e(){var e=[],t=new google.maps.LatLngBounds,o=function(){for(var t=0;t<e.length;t++)e[t].setIcon(n)};$("select").on("change",function(){o(),$("aside").hide(),$("input").val(""),t=new google.maps.LatLngBounds;for(var n=0;n<e.length;n++)"All"===this.value?(e[n].setVisible(!0),t.extend(e[n].position)):e[n].type.indexOf(this.value)>-1?(e[n].setVisible(!0),t.extend(e[n].position)):e[n].setVisible(!1);if(t.getNorthEast().equals(t.getSouthWest())){var a=new google.maps.LatLng(t.getNorthEast().lat()+.01,t.getNorthEast().lng()+.01),s=new google.maps.LatLng(t.getNorthEast().lat()-.01,t.getNorthEast().lng()-.01);t.extend(a),t.extend(s)}i.fitBounds(t),i.panToBounds(t)}),$(".search").submit(function(n){n.preventDefault(),$("#pac-input").blur(),o(),$("aside").hide(),t=new google.maps.LatLngBounds;var a=$("#pac-input").val().toLowerCase();if($.each(e,function(e,o){-1!==o.title.toLowerCase().search(new RegExp(a,"g"))?(o.setVisible(!0),t.extend(o.position)):-1!==o.comments.toLowerCase().search(new RegExp(a,"g"))?(o.setVisible(!0),t.extend(o.position)):o.setVisible(!1)}),t.getNorthEast().equals(t.getSouthWest())){var s=new google.maps.LatLng(t.getNorthEast().lat()+.01,t.getNorthEast().lng()+.01),l=new google.maps.LatLng(t.getNorthEast().lat()-.01,t.getNorthEast().lng()-.01);t.extend(s),t.extend(l)}i.fitBounds(t),i.panToBounds(t)});var n={path:google.maps.SymbolPath.CIRCLE,fillColor:"#D0006E",fillOpacity:1,scale:4,strokeColor:"#D0006E",strokeWeight:4},a={path:google.maps.SymbolPath.CIRCLE,fillColor:"#00C618",fillOpacity:1,scale:4,strokeColor:"#00C618",strokeWeight:10},s={center:{lat:-37.8136,lng:144.9631},zoom:14},i=new google.maps.Map(document.getElementById("mapCanvas"),s);google.maps.event.addListener(i,"zoom_changed",function(){setTimeout(function(){var e=i.getCenter();e.e+=1e-6,i.panTo(e),e.e-=1e-6,i.panTo(e)},400)}),json.forEach(function(t){var s=new google.maps.LatLng(t.lat,t.long),l=new google.maps.Marker({position:s,map:i,title:t.name,icon:n,type:t.type,comments:t.comments});google.maps.event.addListener(l,"click",function(){o(),$("aside").show(),$(".poiName").html(t.name),$(".poiType").html(t.type.join(", ")),""===t.comments?$(".comments").hide():$(".comments").show().html(t.comments),""===t.website?$(".website").hide():$(".website").show().html('<a href="'+t.website+'" target="_blank">'+t.website+"</a>"),i.panTo(s),l.setIcon(a)}),google.maps.event.addListener(i,"click",function(){$("aside").hide(),l.setIcon(n)}),e.push(l)})}google.maps.event.addDomListener(window,"load",e)});